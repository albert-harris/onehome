/**
* autoNumeric.js
* @author: Bob Knothe
* @contributor: Sokolov Yura
* @version: 2.0-beta - 2014-08-02 GMT 11:00 AM
*/
!function(e){"use strict";function t(e){var t={};if(void 0===e.selectionStart){e.focus();var a=document.selection.createRange();t.length=a.text.length,a.moveStart("character",-e.value.length),t.end=a.text.length,t.start=t.end-t.length}else t.start=e.selectionStart,t.end=e.selectionEnd,t.length=t.end-t.start;return t}function a(e,t,a){if(void 0===e.selectionStart){e.focus();var i=e.createTextRange();i.collapse(!0),i.moveEnd("character",a),i.moveStart("character",t),i.select()}else e.selectionStart=t,e.selectionEnd=a}function i(t,a){e.each(a,function(e,i){"function"==typeof i?a[e]=i(t,a,e):"function"==typeof t.autoNumeric[i]&&(a[e]=t.autoNumeric[i](t,a,e))})}function n(e,t){"string"==typeof e[t]&&(e[t]*=1)}function r(e,t){i(e,t),t.oEvent=null,t.tagList=["b","caption","cite","code","dd","del","div","dfn","dt","em","h1","h2","h3","h4","h5","h6","ins","kdb","label","li","output","p","q","s","sample","span","strong","td","th","u","var"];var a=t.vMax.toString().split("."),r=t.vMin||0===t.vMin?t.vMin.toString().split("."):[];if(n(t,"vMax"),n(t,"vMin"),t.mDec="CHF"===t.mRound?"2":t.mDec,n(t,"mDec"),t.allowLeading=!0,null!==t.oRide){var o=t.oRide.split(",");t.aNeg=o[0]<0?"-":"",t.mDec=+o[1]}else t.aNeg=t.vMin<0?"-":"";if(a[0]=a[0].replace("-",""),r[0]=r[0].replace("-",""),t.mInt=Math.max(a[0].length,r[0].length,1),null===t.mDec){var s=0,u=0;a[1]&&(s=a[1].length),r[1]&&(u=r[1].length),t.mDec=Math.max(s,u),t.oDec=t.mDec}null===t.altDec&&t.mDec>0&&("."===t.aDec&&","!==t.aSep?t.altDec=",":","===t.aDec&&"."!==t.aSep&&(t.altDec="."));var l=t.aNeg?"([-\\"+t.aNeg+"]?)":"(-?)";t.aNegRegAutoStrip=l,t.skipFirstAutoStrip=new RegExp(l+"[^-"+(t.aNeg?"\\"+t.aNeg:"")+"\\"+t.aDec+"\\d].*?(\\d|\\"+t.aDec+"\\d)"),t.skipLastAutoStrip=new RegExp("(\\d\\"+t.aDec+"?)[^\\"+t.aDec+"\\d]\\D*$");var c="-"+t.aNum+"\\"+t.aDec;return t.allowedAutoStrip=new RegExp("[^"+c+"]","gi"),t.numRegAutoStrip=new RegExp(l+"(?:\\"+t.aDec+"?(\\d+\\"+t.aDec+"\\d+)|(\\d*(?:\\"+t.aDec+"\\d*)?))"),t}function o(e,t,a,i,n){return"right"===n?e:(t=t.split(","),"set"===a||"focusout"===a?(e=e.replace("-",""),e=""!==i?e.replace(i,""):e,e=t[0]+e+t[1]+i):"get"!==a&&"focusin"!==a&&"pageLoad"!==a||e.charAt(0)!==t[0]||(e=e.replace(t[0],"-"),e=e.replace(t[1],"")),e)}function s(e,t,a){if(null!==t.nBracket&&-1!==e.indexOf(t.nBracket.split(",")[0])&&(e=o(e,t.nBracket,"get",t.aSuffix,t.pNeg)),t.aSign)for(;e.indexOf(t.aSign)>-1;)e=e.replace(t.aSign,"");if(t.aSuffix)for(;e.indexOf(t.aSuffix)>-1;)e=e.replace(t.aSuffix,"");e=e.replace(t.skipFirstAutoStrip,"$1$2"),e=e.replace(t.skipLastAutoStrip,"$1"),e=e.replace(t.allowedAutoStrip,""),t.altDec&&(e=e.replace(t.altDec,t.aDec));var i=e.match(t.numRegAutoStrip);if(e=i?[i[1],i[2],i[3]].join(""):"",("allow"===t.lZero||"keep"===t.lZero)&&"strip"!==a){var n=[],r="";n=e.split(t.aDec),-1!==n[0].indexOf("-")&&(r="-",n[0]=n[0].replace("-","")),n[0].length>t.mInt&&"0"===n[0].charAt(0)&&(n[0]=n[0].slice(1)),e=r+n.join(t.aDec)}if(a&&"deny"===t.lZero||a&&"allow"===t.lZero&&t.allowLeading===!1){var s="^"+t.aNegRegAutoStrip+"0*(\\d"+("leading"===a?")":"|$)");s=new RegExp(s),e=e.replace(s,"$1$2")}return e}function u(e,t,a){if(t&&a){var i=e.split(t);i[1]&&i[1].length>a&&(a>0?(i[1]=i[1].substring(0,a),e=i.join(t)):e=i[0])}return e}function l(e,t,a){return t&&"."!==t&&(e=e.replace(t,".")),a&&"-"!==a&&(e=e.replace(a,"-")),e.match(/\d/)||(e+="0"),e}function c(e,t){if(e){var a=+e;if(1e-6>a&&a>-1)e=+e,1e-6>e&&e>0&&(e=(e+10).toString(),e=e.substring(1)),0>e&&e>-1&&(e=(e-10).toString(),e="-"+e.substring(2)),e=e.toString();else{var i=e.split(".");void 0!==i[1]&&(0===+i[1]?e=i[0]:(i[1]=i[1].replace(/0*$/,""),e=i.join(".")))}}return"keep"===t.lZero?e:e.replace(/^0*(\d)/,"$1")}function p(e,t,a){return a&&"-"!==a&&(e=e.replace("-",a)),t&&"."!==t&&(e=e.replace(".",t)),e}function h(e,t){if(e=e.replace(",","."),e=u(e,t),e=l(e,t.aDec,t.aNeg),null!==t.oRide){var a=t.oRide.split(","),i=-1===e.indexOf(".")?e.length:e.indexOf(".");return-1===e.indexOf("-")?"0"===Math.abs(a[0])&&"0"===e?!0:i>Math.abs(a[0])?!1:!0:i-1>Math.abs(a[0])?!1:!0}var n=+e;return n>=t.vMin&&n<=t.vMax}function g(e,t,a){return""===e||e===t.aNeg?"zero"===t.wEmpty?e+"0":"sign"===t.wEmpty||a?"left"===t.pNeg?e+t.aSign+t.aSuffix:t.aSign+e+t.aSuffix:e:null}function d(e,t){e=s(e,t);var a=e.replace(",","."),i=g(e,t,!0),n=-1!==e.indexOf(t.aNeg);if(null!==i)return i;var r="";r=2===t.dGroup?/(\d)((\d)(\d{2}?)+)$/:"2s"===t.dGroup?/(\d)((?:\d{2}){0,2}\d{3}(?:(?:\d{2}){2}\d{3})*?)$/:4===t.dGroup?/(\d)((\d{4}?)+)$/:/(\d)((\d{3}?)+)$/;var u=e.split(t.aDec);t.altDec&&1===u.length&&(u=e.split(t.altDec));var l=u[0];if(""!==t.aSep)for(;r.test(l);)l=l.replace(r,"$1"+t.aSep+"$2");return 0!==t.mDec&&u.length>1?(u[1].length>t.mDec&&(u[1]=u[1].substring(0,t.mDec)),e=l+t.aDec+u[1]):e=l,t.aSign&&(e=e.replace(t.aNeg,""),"p"===t.pSign?(n&&"right"===t.pNeg&&(e=t.aSign+t.aNeg+e),n&&"left"===t.pNeg&&(e=t.aNeg+t.aSign+e),n||(e=t.aSign+e)):n?e=t.aNeg+e+t.aSign:e+=t.aSign),t.aSuffix&&(e+=t.aSuffix),"set"===t.oEvent&&0>a&&null!==t.nBracket&&(e=o(e,t.nBracket,t.oEvent,t.aSuffix,t.pNeg)),e}function f(e,t){e=""===e?"0":e.toString(),n(t,"mDec"),"CHF"===t.mRound&&(e=(Math.round(20*e)/20).toString());var a="",i=0,r="",o="boolean"==typeof t.aPad||null===t.aPad?t.aPad?t.mDec:0:+t.aPad,s=function(e){var t=0===o?/(\.(?:\d*[1-9])?)0*$/:1===o?/(\.\d(?:\d*[1-9])?)0*$/:new RegExp("(\\.\\d{"+o+"}(?:\\d*[1-9])?)0*");return e=e.replace(t,"$1"),0===o&&(e=e.replace(/\.$/,"")),e};"-"===e.charAt(0)&&(r="-",e=e.replace("-","")),e.match(/^\d/)||(e="0"+e),"-"===r&&0===+e&&(r=""),(+e>0&&"keep"!==t.lZero||e.length>0&&"allow"===t.lZero)&&(e=e.replace(/^0*(\d)/,"$1"));var u=e.lastIndexOf("."),l=-1===u?e.length-1:u,c=e.length-1-l;if(c<=t.mDec){if(a=e,o>c){-1===u&&(a+=".");for(var p="000000";o>c;)p=p.substring(0,o-c),a+=p,c+=p.length}else c>o?a=s(a):0===c&&0===o&&(a=a.replace(/\.$/,""));if("CHF"!==t.mRound)return 0===+a?a:r+a;"CHF"===t.mRound&&(u=a.lastIndexOf("."),e=a)}var h=u+t.mDec,g=+e.charAt(h+1),d=e.substring(0,h+1).split(""),f="."===e.charAt(h)?e.charAt(h-1)%2:e.charAt(h)%2,m=!0;if(1!==f&&(f=0===f&&e.substring(h+2,e.length)>0?1:0),g>4&&"S"===t.mRound||g>4&&"A"===t.mRound&&""===r||g>5&&"A"===t.mRound&&"-"===r||g>5&&"s"===t.mRound||g>5&&"a"===t.mRound&&""===r||g>4&&"a"===t.mRound&&"-"===r||g>5&&"B"===t.mRound||5===g&&"B"===t.mRound&&1===f||g>0&&"C"===t.mRound&&""===r||g>0&&"F"===t.mRound&&"-"===r||g>0&&"U"===t.mRound||"CHF"===t.mRound)for(i=d.length-1;i>=0;i-=1)if("."!==d[i]){if("CHF"===t.mRound&&d[i]<=2&&m){d[i]=0,m=!1;break}if("CHF"===t.mRound&&d[i]<=7&&m){d[i]=5,m=!1;break}if("CHF"===t.mRound&&m?(d[i]=10,m=!1):d[i]=+d[i]+1,d[i]<10)break;i>0&&(d[i]="0")}return d=d.slice(0,h+1),a=s(d.join("")),0===+a?a:r+a}function m(t,a){this.settings=a,this.that=t,this.$that=e(t),this.formatted=!1,this.settingsClone=r(this.$that,this.settings),this.value=t.value}function v(t){return"string"==typeof t&&(t=t.replace(/\[/g,"\\[").replace(/\]/g,"\\]"),t="#"+t.replace(/(:|\.)/g,"\\$1")),e(t)}function S(e,t,a){var i=e.data("autoNumeric");i||(i={},e.data("autoNumeric",i));var n=i.holder;return(void 0===n&&t||a)&&(n=new m(e.get(0),t),i.holder=n),n}function y(e){return e.oDec=e.mDec,e.oPad=e.aPad,e.oBracket=e.nBracket,e.oSep=e.aSep,e.oSign=e.aSign,e}function N(e){var t=e+"=",a=document.cookie.split(";"),i=0,n="";for(i;i<a.length;i+=1){for(n=a[i];" "===n.charAt(0);)n=n.substring(1,n.length);if(0===n.indexOf(t))return n.substring(t.length,n.length)}return null}function D(){var e="test";try{return sessionStorage.setItem(e,e),sessionStorage.removeItem(e),!0}catch(t){return!1}}function w(e,t,a){if(t.aStor){var i=""!==e[0].name&&void 0!==e[0].name?"AUTO_"+decodeURIComponent(e[0].name):"AUTO_"+e[0].id;if(D()===!1){if("get"===a)return N(i);if("set"===a&&(document.cookie=i+"="+t.rawValue+"; expires= ; path=/"),"wipe"===a){var n=new Date;n.setTime(n.getTime()+-864e5);var r="; expires="+n.toGMTString();document.cookie=i+'="" ;'+r+"; path=/"}}else{if("get"===a)return sessionStorage.getItem(i);"set"===a&&sessionStorage.setItem(i,t.rawValue),"wipe"===a&&sessionStorage.removeItem(i)}}}m.prototype={init:function(e){this.value=this.that.value,this.settingsClone=r(this.$that,this.settings),this.ctrlKey=e.ctrlKey,this.cmdKey=e.metaKey,this.shiftKey=e.shiftKey,this.selection=t(this.that),("keydown"===e.type||"keyup"===e.type)&&(this.kdCode=e.keyCode),this.which=e.which,this.processed=!1,this.formatted=!1},setSelection:function(e,t,i){e=Math.max(e,0),t=Math.min(t,this.that.value.length),this.selection={start:e,end:t,length:t-e},(void 0===i||i)&&a(this.that,e,t)},setPosition:function(e,t){this.setSelection(e,e,t)},getBeforeAfter:function(){var e=this.value,t=e.substring(0,this.selection.start),a=e.substring(this.selection.end,e.length);return[t,a]},getBeforeAfterStriped:function(){var e=this.getBeforeAfter();return e[0]=s(e[0],this.settingsClone),e[1]=s(e[1],this.settingsClone),e},normalizeParts:function(e,t){var a=this.settingsClone;t=s(t,a);var i=t.match(/^\d/)?!0:"leading";if(e=s(e,a,i),""!==e&&e!==a.aNeg||"deny"!==a.lZero||t>""&&(t=t.replace(/^0*(\d)/,"$1")),null!==a.oRide){var n=a.oRide.split(",");-1===e.indexOf("-")?"0"===e.charAt(0)&&e.length>Math.abs(n[0])&&(e="0"===e?e:e.substr(1)):e.length-1>Math.abs(n[0])&&(e=e.substr(1),e="0"===e.charAt(0)?e.substr(1):e,e="-"+e)}var r=e+t;if(a.aDec){var o=r.match(new RegExp("^"+a.aNegRegAutoStrip+"\\"+a.aDec));o&&(e=e.replace(o[1],o[1]+"0"),r=e+t)}return"zero"!==a.wEmpty||r!==a.aNeg&&""!==r||(e+="0"),[e,t]},setValueParts:function(e,t){var a=this.settingsClone,i=this.normalizeParts(e,t),n=i.join(""),r=i[0].length;if(h(n,a)){n=u(n,a);var o=-1!==n.indexOf(",")?n.replace(",","."):n,s=o;return""===o||"-"===o?a.rawValue="":(o=1e-6>+o&&+o>-1?c(o,a):o.toString(),a.rawValue=null===a.oRide?o:s),r>n.length&&(r=n.length),this.value=n,this.setPosition(r,!1),!0}return!1},signPosition:function(){var e=this.settingsClone,t=e.aSign,a=this.that;if(t){var i=t.length;if("p"===e.pSign){var n=e.aNeg&&a.value&&a.value.charAt(0)===e.aNeg;return n?[1,i+1]:[0,i]}var r=a.value.length;return[r-i,r]}return[1e3,-1]},expandSelectionOnSign:function(e){var t=this.signPosition(),a=this.selection;a.start<t[1]&&a.end>t[0]&&((a.start<t[0]||a.end>t[1])&&this.value.substring(Math.max(a.start,t[0]),Math.min(a.end,t[1])).match(/^\s*$/)?a.start<t[0]?this.setSelection(a.start,t[0],e):this.setSelection(t[1],a.end,e):this.setSelection(Math.min(a.start,t[0]),Math.max(a.end,t[1]),e))},checkPaste:function(){if(void 0!==this.valuePartsBeforePaste){var e=this.getBeforeAfter(),t=this.valuePartsBeforePaste;delete this.valuePartsBeforePaste,e[0]=e[0].substr(0,t[0].length)+s(e[0].substr(t[0].length),this.settingsClone),this.setValueParts(e[0],e[1])||(this.value=t.join(""),this.setPosition(t[0].length,!1))}},skipAllways:function(e){var t=this.kdCode,a=this.which,i=this.ctrlKey,n=this.cmdKey,r=this.shiftKey;if((i||n)&&"keyup"===e.type&&void 0!==this.valuePartsBeforePaste||r&&45===t)return this.checkPaste(),!1;if(t>=112&&123>=t||t>=91&&93>=t||t>=9&&31>=t||8>t&&(0===a||a===t)||144===t||145===t||45===t)return!0;if((i||n)&&65===t)return!0;if((i||n)&&(67===t||86===t||88===t))return"keydown"===e.type&&this.expandSelectionOnSign(),(86===t||45===t)&&("keydown"===e.type||"keypress"===e.type?void 0===this.valuePartsBeforePaste&&(this.valuePartsBeforePaste=this.getBeforeAfter()):this.checkPaste()),"keydown"===e.type||"keypress"===e.type||67===t;if(i||n)return!0;if(37===t||39===t){var o=this.settingsClone.aSep,s=this.settingsClone.aDec,u=this.selection.start,l=this.that.value;return"keydown"!==e.type||this.shiftKey||(37!==t||l.charAt(u-2)!==o&&l.charAt(u-2)!==s?39!==t||l.charAt(u+1)!==o&&l.charAt(u+1)!==s||this.setPosition(u+1):this.setPosition(u-1)),!0}return t>=34&&40>=t?!0:!1},processAllways:function(){var e;return 8===this.kdCode||46===this.kdCode?(this.selection.length?(this.expandSelectionOnSign(!1),e=this.getBeforeAfterStriped(),this.setValueParts(e[0],e[1])):(e=this.getBeforeAfterStriped(),8===this.kdCode?e[0]=e[0].substring(0,e[0].length-1):e[1]=e[1].substring(1,e[1].length),this.setValueParts(e[0],e[1])),!0):!1},processKeypress:function(){var e=this.settingsClone,t=String.fromCharCode(this.which),a=this.getBeforeAfterStriped(),i=a[0],n=a[1];return t===e.aDec||e.altDec&&t===e.altDec||("."===t||","===t)&&110===this.kdCode?e.mDec&&e.aDec?e.aNeg&&n.indexOf(e.aNeg)>-1?!0:i.indexOf(e.aDec)>-1?!0:n.indexOf(e.aDec)>0?!0:(0===n.indexOf(e.aDec)&&(n=n.substr(1)),this.setValueParts(i+e.aDec,n),!0):!0:"-"===t||"+"===t?e.aNeg?(""===i&&n.indexOf(e.aNeg)>-1&&(i=e.aNeg,n=n.substring(1,n.length)),i=i.charAt(0)===e.aNeg?i.substring(1,i.length):"-"===t?e.aNeg+i:i,this.setValueParts(i,n),!0):!0:t>="0"&&"9">=t?(e.aNeg&&""===i&&n.indexOf(e.aNeg)>-1&&(i=e.aNeg,n=n.substring(1,n.length)),e.vMax<=0&&e.vMin<e.vMax&&-1===this.value.indexOf(e.aNeg)&&"0"!==t&&(i=e.aNeg+i),this.setValueParts(i+t,n),!0):!0},formatQuick:function(){var e=this.settingsClone,t=this.getBeforeAfterStriped(),a=this.value;if((""===e.aSep||""!==e.aSep&&-1===a.indexOf(e.aSep))&&(""===e.aSign||""!==e.aSign&&-1===a.indexOf(e.aSign))){var i=[],n="";i=a.split(e.aDec),i[0].indexOf("-")>-1&&(n="-",i[0]=i[0].replace("-",""),t[0]=t[0].replace("-","")),i[0].length>e.mInt&&"0"===t[0].charAt(0)&&(t[0]=t[0].slice(1)),t[0]=n+t[0]}var r=d(this.value,this.settingsClone),o=r.length;if(r){var s=t[0].split(""),u=0;for(u;u<s.length;u+=1)s[u].match("\\d")||(s[u]="\\"+s[u]);var l=new RegExp("^.*?"+s.join(".*?")),c=r.match(l);c?(o=c[0].length,(0===o&&r.charAt(0)!==e.aNeg||1===o&&r.charAt(0)===e.aNeg)&&e.aSign&&"p"===e.pSign&&(o=this.settingsClone.aSign.length+("-"===r.charAt(0)?1:0))):(e.aSign&&"s"===e.pSign&&(o-=e.aSign.length),e.aSuffix&&(o-=e.aSuffix.length))}this.that.value=r,this.setPosition(o),this.formatted=!0}};var x={init:function(t){return this.each(function(){var i=e(this),n=i.data("autoNumeric"),r=i.data();if("object"==typeof n)return this;var u={aNum:"0123456789",aSep:",",nSep:!1,dGroup:"3",aDec:".",altDec:null,aSign:"",pSign:"p",pNeg:"left",aSuffix:"",vMax:"9999999999999.99",vMin:"-9999999999999.99",mDec:null,eDec:null,oRide:null,aStor:!0,mRound:"S",aPad:!0,nBracket:null,wEmpty:"empty",lZero:"allow",aForm:!0,onSomeEvent:function(){}};n=e.extend({},u,r,t),i.data("autoNumeric",n),n=y(n),n.rawValue="",n.runOnce=!1;var c=S(i,n);if(!i.is("input[type=text], input[type=hidden], input[type=tel], input:not([type])")&&"input"===i.prop("tagName").toLowerCase())return e.error('The input type "'+i.prop("type")+'" is not supported by autoNumeric()'),this;if(-1===e.inArray(i.prop("tagName").toLowerCase(),n.tagList)&&"input"!==i.prop("tagName").toLowerCase())return e.error("The <"+i.prop("tagName").toLowerCase()+"> is not supported by autoNumeric()"),this;if(n.aDec===n.aSep)return e.error("autoNumeric will not function properly when the decimal character aDec: '"+n.aDec+"' and thousand separator aSep: '"+n.aSep+"' are the same character"),this;if(n.eDec<n.mDec&&null!==n.eDec)return e.error("autoNumeric will not function properly when the extended decimal places 'eDec: '"+n.eDec+"' is greater than mDec: '"+n.mDec+"' value"),this;if(n.runOnce===!1&&n.aForm&&i.is("input[type=text], input[type=hidden], input[type=tel], input:not([type])")){var m=!0;""!==i.val()&&i.val()!==i.attr("value")&&(null!==n.eDec&&n.aStor&&(null!==w(i,n,"get")&&i.autoNumeric("set",w(i,n,"get")),m=!1),(null!==n.eDec&&n.aStor===!1||null===w(i,n,"get"))&&(i.autoNumeric("set",s(i.val(),n).replace(",",".")),m=!1)),""===i.val()&&"empty"===n.wEmpty&&(i.val(""),m=!1),""===i.val()&&"sign"===n.wEmpty&&(i.val(n.aSign),m=!1),m&&i.autoNumeric("set",i.val())}-1!==e.inArray(i.prop("tagName").toLowerCase(),n.tagList)&&""!==i.text()&&i.autoNumeric("set",i.text()),n.runOnce=!0,i.is("input[type=text], input[type=hidden], input[type=tel], input:not([type])")&&(i.on("keydown.autoNumeric",function(e){return c=S(i),c.that.readOnly?(c.processed=!0,!0):(c.init(e),c.skipAllways(e)?(c.processed=!0,!0):c.processAllways()?(c.processed=!0,c.formatQuick(),e.preventDefault(),!1):(c.formatted=!1,!0))}),i.on("keypress.autoNumeric",function(e){var t=S(i),a=t.processed;return t.init(e),t.skipAllways(e)?!0:a?(e.preventDefault(),!1):t.processAllways()||t.processKeypress()?(t.formatQuick(),e.preventDefault(),!1):void(t.formatted=!1)}),i.on("keyup.autoNumeric",function(e){var t=S(i);t.init(e);var r=t.skipAllways(e);return t.kdCode=0,delete t.valuePartsBeforePaste,i[0].value===t.settingsClone.aSign&&("s"===t.settingsClone.pSign?a(this,0,0):a(this,t.settingsClone.aSign.length,t.settingsClone.aSign.length)),i[0].value===t.settingsClone.aSuffix&&a(this,0,0),""===t.settingsClone.rawValue&&""!==t.settingsClone.aSign&&""!==t.settingsClone.aSuffix&&a(this,0,0),null!==t.settingsClone.eDec&&w(i,n,"set"),r?!0:""===this.value?!0:void(t.formatted||t.formatQuick())}),i.on("focusin.autoNumeric",function(){var e=S(i),t=e.settingsClone;if(t.oEvent="focusin",null!==t.nBracket){var a=i.val();i.val(o(a,t.nBracket,t.oEvent,t.aSuffix,t.pNeg))}t.nSep===!0&&(t.aSep="",t.aSign=""),null!==t.eDec?(t.mDec=t.eDec,t.aPad=!1,t.nBracket=null,i.autoNumeric("set",t.rawValue)):i.autoNumeric("set",t.rawValue),e.inVal=i.val();var n=g(e.inVal,t,!0);null!==n&&""!==n&&i.val(n),t.oEvent=null}),i.on("focusout.autoNumeric",function(){var e=S(i),t=i.val(),a=t,n=e.settingsClone;n.oEvent="focusout",null!==n.eDec&&w(i,n,"set");var r="";"allow"===n.lZero&&(n.allowLeading=!1,r="leading"),n.nSep===!0&&(n.aSep=n.oSep,n.aSign=n.oSign),null!==n.eDec&&(n.mDec=n.oDec,n.aPad=n.oPad,n.nBracket=n.oBracket),""!==t&&(t=s(t,n,r),null===g(t,n)&&h(t,n,i[0])?(t=l(t,n.aDec,n.aNeg),t=f(t,n),t=p(t,n.aDec,n.aNeg)):t="");var u=g(t,n,!1);null===u&&(u=d(t,n)),u!==a&&i.val(u),u!==e.inVal&&(i.change(),delete e.inVal),null!==n.nBracket&&n.rawValue<0&&i.val(o(i.val(),n.nBracket,n.oEvent,n.aSuffix,n.pNeg)),n.oEvent=null}))})},destroy:function(){return e(this).each(function(){var t=v(e(this)),a=t.data("autoNumeric");t.val(""),w(t,a,"wipe"),t.off(".autoNumeric"),t.removeData("autoNumeric")})},wipe:function(){return e(this).each(function(){var t=v(e(this)),a=t.data("autoNumeric");return"object"!=typeof a?(e.error("You must initialize autoNumeric('init', {options}) prior to calling the 'wipe' method"),this):(t.val(""),a.rawValue="",void w(t,a,"wipe"))})},update:function(t){return e(this).each(function(){var a=v(e(this)),i=a.data("autoNumeric");if("object"!=typeof i)return e.error("You must initialize autoNumeric('init', {options}) prior to calling the 'update' method"),this;var n=a.autoNumeric("get");return i=e.extend(i,t),i=y(i),S(a,i,!0),i.aDec===i.aSep?(e.error("autoNumeric will not function properly when the decimal character aDec: '"+i.aDec+"' and thousand separator aSep: '"+i.aSep+"' are the same character"),this):(a.data("autoNumeric",i),""!==a.val()||""!==a.text()?a.autoNumeric("set",n):void 0)})},set:function(t){return e(this).each(function(){if(null!==t){var a=v(e(this)),i=a.data("autoNumeric"),n=t.toString(),r=t.toString(),o=a.is("input[type=text], input[type=hidden], input[type=tel], input:not([type])");return r=t.toString(),"object"!=typeof i?(e.error("You must initialize autoNumeric('init', {options}) prior to calling the 'set' method"),!1):(n=n.replace(",","."),e.isNumeric(+n)?(n=c(n,i),"focusin"!==i.oEvent&&(i.oEvent="set"),n.toString(),""!==n&&(null!==i.eDec&&(i.rawValue=n),n=f(n,i),null===i.eDec&&(i.rawValue=n),o&&null!==i.eDec&&w(a,i,"set")),n=p(n,i.aDec,i.aNeg),h(r,i)===!1?(a.val(""),i.rawValue="",w(a,i,"wipe"),e.error("The value ("+n+") being 'set' falls outside of the vMin / vMax range"),!1):(n=d(n,i),o?a.val(n):-1!==e.inArray(a.prop("tagName").toLowerCase(),i.tagList)?a.text(n):(e.error("The <"+a.prop("tagName").toLowerCase()+"> is not supported by autoNumeric()"),!1))):void e.error("The value being 'set' is not numeric that has caused a error to be thrown"))}})},reSet:function(){return e(this).each(function(){var t=v(e(this)),a=t.data("autoNumeric");return"object"!=typeof a?(e.error("You must initialize autoNumeric('init', {options}) prior to calling the 'unSet' method"),this):void t.autoNumeric("set",t.val())})},unSet:function(t){return e(this).each(function(){var a=v(e(this)),i=a.data("autoNumeric");return"object"!=typeof i?(e.error("You must initialize autoNumeric('init', {options}) prior to calling the 'unSet' method"),this):void("object"==typeof i&&a.val(a.autoNumeric("get",t)))})},get:function(t){var a=v(e(this)),i=a.data("autoNumeric");if("object"!=typeof i)return e.error("You must initialize autoNumeric('init', {options}) prior to calling the 'get' method"),!1;var n="";if(a.is("input[type=text], input[type=hidden], input[type=tel], input:not([type])"))n=a.eq(0).val();else{if(-1===e.inArray(a.prop("tagName").toLowerCase(),i.tagList))return e.error("The <"+a.prop("tagName").toLowerCase()+"> is not supported by autoNumeric()"),!1;n=a.eq(0).text()}return""!==i.rawValue&&(n=i.rawValue),""===n&&"empty"===i.wEmpty||n===i.aSign&&("sign"===i.wEmpty||"empty"===i.wEmpty)?"":(i.oEvent="get",null!==i.nBracket&&""!==n&&(n=o(n,i.nBracket,i.oEvent,i.aSuffix,i.pNeg)),n=l(n,i.aDec,i.aNeg),0===+n&&"keep"!==i.lZero&&(n="0"),n=c(n,i),"asKomma"===t&&(n=n.replace(".",",")),"checkOptions"===t&&","===i.aDec&&(n=n.replace(".",",")),n)},getString:function(t){var a=!1,i=v(e(this)),n=i.serialize(),r=n.split("&"),o=0;for(o;o<r.length;o+=1){var s=r[o].split("="),u=e('*[name="'+decodeURIComponent(s[0])+'"]'),l=u.data("autoNumeric");"object"==typeof l&&null!==s[1]&&(s[1]=u.autoNumeric("get",t),r[o]=s.join("="),a=!0)}return a===!0?r.join("&"):n},getArray:function(t){var a=!1,i=v(e(this)),n=i.serializeArray();return e.each(n,function(i,n){var r=e('*[name="'+decodeURIComponent(n.name)+'"]'),o=r.data("autoNumeric");"object"==typeof o&&(""!==n.value&&(n.value=r.autoNumeric("get",t).toString()),a=!0)}),a===!0?n:(e.error("You must initialize autoNumeric('init', {options}) prior to calling the 'getArray' method"),this)},getSettings:function(){var t=v(e(this));return t.eq(0).data("autoNumeric")}};e.fn.autoNumeric=function(t){return x[t]?x[t].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof t&&t?void e.error('Method "'+t+'" is not supported by autoNumeric()'):x.init.apply(this,arguments)}}(jQuery,window,document);